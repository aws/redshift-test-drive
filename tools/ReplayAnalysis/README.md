# Replay Analysis README

## Introduction
The Replay analysis web app will be provided for customer use to analyze and compare replays. The goal of this tool is to facilitate customer understanding of Simple Replay results and simplify analysis results to enable customers to make the right decisions for their use of Redshift.


## Preparation
### Prerequisites
* Execute replay by adding the following parameters in replay.yaml
    * analysis_iam_role
    * analysis_output
* Pre-install Node js



## Command
```
make  replay_analysis

```

## Output
* Installs all the requiremnts required to launch the web app.
* Opens Web app which helps customer to choose multiple replays for comparison.

## User Interface of the Web App <br />
The start page of the interface will prompt users to provide the bucket location(s) with replays they want to analyze. It provides users the ability to select a number of replays for analysis. 

### Steps for using Web UI

* The start Page promts to add the  following:
    * Credentials Type
        * Use a Profile 
        Enter user profile for the account where the Replay Bucket resides.
        * Use an IAM Role
        Enter IAM role for the bucket mentioned in Replay Bucket.
    * Replay Bucket
    Bucket where the analysis ouput lies which was pre-generated by running replay 
    * Replays
    List of replays available in the bucket for comaprison
* Select the replays and click the Analysis button for generating the comaprison analysis of the replay runs.

### Web UI Output
* Replay Analysis <br />
The main feature of this section is the interaction.The user will be able to select a section of the throughput graph and have the tables for execution time and top running queries update to reflect the selection portion of the replays. The user will be able to filter the results in these tables by statement type (COPY, SELECT, INSERT, UPDATE, etc.) and by user.Additionally, this section will include tables that show the execution time metrics for each replay and the top 100 running queries. 

* Replay Validation <br />
It is designed to give the customer more insight into the success and validity of a given replay. Validity is defined by success and error rates, the distribution of errors, and differences in data ingested. This section will include a stacked bar chart that shows the distribution of errors that occurred across each replay and allow insight into which errors occurred most frequently. It will also include tables that show the difference in ingestion for Spectrum and COPY.

